theorem h₅₁₈ (f : ℤ → ℤ) (h_imp : (f = fun n => 1 - n) → (∀ (n : ℤ), f (f n) = n) ∧ (∀ (n : ℤ), f (f (n + 2) + 2) = n) ∧ f 0 = 1) (h : (∀ (n : ℤ), f (f n) = n) ∧ (∀ (n : ℤ), f (f (n + 2) + 2) = n) ∧ f 0 = 1) (h₁ : ∀ (n : ℤ), f (f n) = n) (h₂ : ∀ (n : ℤ), f (f (n + 2) + 2) = n) (h₃ : f 0 = 1) (h₄ : f 1 = 0) (n : ℤ) (h₅₁ : f (f (n + 2) + 2) = n) (h₅₂ : f (f (n + 2)) = n + 2) (h₅₃ : f (f n) = n) (h₅₄ : f (f (n + 2) + 2) = n) (h₅₅ : f (f n) = n) (h₅₆ : f (f (n + 2)) = n + 2) (h₅₇ : f (f (n + 2) + 2) = f (f n)) (h₅₈ : f (f (n + 2) + 2) = n) (h₅₉ : f (f n) = n) (h₅₁₁ : f (f (f (n + 2) + 2)) = f (n + 2) + 2) (h₅₁₂ : f (f (f n)) = f n) (h₅₁₃ : f (f (f (n + 2))) = f (n + 2)) (h₅₁₄ : f (f (n + 2) + 2) = n) (h₅₁₅ : f (f n) = n) (h₅₁₆ : f (f (n + 2)) = n + 2) (h₅₁₇ : f (f (n + 2) + 2) = f (f n)) : f (n + 2) = f n - 2 := by apply_fun f at h₅₁₇ <;> simp_all [h₁] <;> ring_nf at * <;> linarith